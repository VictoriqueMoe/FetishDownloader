{"version":3,"sources":["webpack://Fetish/webpack/universalModuleDefinition","webpack://Fetish/webpack/bootstrap","webpack://Fetish/./node_modules/js-sha256/src/sha256.js","webpack://Fetish/./node_modules/process/browser.js","webpack://Fetish/(webpack)/buildin/amd-options.js","webpack://Fetish/(webpack)/buildin/global.js","webpack://Fetish/./src/FetishDocumentParser.ts","webpack://Fetish/./src/FetishImage.ts","webpack://Fetish/./src/FetishSite.ts","webpack://Fetish/./src/IFetishSite.ts","webpack://Fetish/./src/Main.ts","webpack://Fetish/./src/UI.ts","webpack://Fetish/./src/Utils.ts","webpack://Fetish/external \"JSZip\""],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,YAAY,KAA4B,IAAI,gGAAU;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,OAAO;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,0BAA0B;AACtD;AACA;AACA,OAAO;AACP,4BAA4B,0BAA0B;AACtD;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM,mCAAO;AACb;AACA,OAAO;AAAA,oGAAC;AACR;AACA;AACA,CAAC;;;;;;;;;;;;;ACrgBD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;ACvLtC;AACA;;;;;;;;;;;;;ACDA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;;;;ICfA,MAAa,cAAc;QAChB,KAAK,CAAC,GAAiB;YAC1B,IAAI,IAAI,GAAG,GAAG,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC;YACjD,IAAI,UAAU,GAA8B,IAAI,CAAC,UAAuC,CAAC;YACzF,IAAI,MAAM,GAAkB,EAAE,CAAC;YAC/B,KAAK,IAAI,CAAC,GAAW,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAChD,IAAI,CAAC,GAAkB,UAAU,CAAC,CAAC,CAAC,CAAC;gBACrC,IAAI,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,YAAY,EAAE;oBACjC,IAAI,aAAa,GAAyB,IAAI,CAAC,eAAe,CAAC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","file":"fetishDownloader.user.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"JSZip\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"JSZip\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Fetish\"] = factory(require(\"JSZip\"));\n\telse\n\t\troot[\"Fetish\"] = factory(root[\"JSZip\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE_JSZip__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/Main.ts\");\n","/**\n * [js-sha256]{@link https://github.com/emn178/js-sha256}\n *\n * @version 0.9.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */\n/*jslint bitwise: true */\n(function () {\n  'use strict';\n\n  var ERROR = 'input is invalid type';\n  var WINDOW = typeof window === 'object';\n  var root = WINDOW ? window : {};\n  if (root.JS_SHA256_NO_WINDOW) {\n    WINDOW = false;\n  }\n  var WEB_WORKER = !WINDOW && typeof self === 'object';\n  var NODE_JS = !root.JS_SHA256_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;\n  if (NODE_JS) {\n    root = global;\n  } else if (WEB_WORKER) {\n    root = self;\n  }\n  var COMMON_JS = !root.JS_SHA256_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD = typeof define === 'function' && define.amd;\n  var ARRAY_BUFFER = !root.JS_SHA256_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var EXTRA = [-2147483648, 8388608, 32768, 128];\n  var SHIFT = [24, 16, 8, 0];\n  var K = [\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n  ];\n  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'arrayBuffer'];\n\n  var blocks = [];\n\n  if (root.JS_SHA256_NO_NODE_JS || !Array.isArray) {\n    Array.isArray = function (obj) {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n  }\n\n  if (ARRAY_BUFFER && (root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView)) {\n    ArrayBuffer.isView = function (obj) {\n      return typeof obj === 'object' && obj.buffer && obj.buffer.constructor === ArrayBuffer;\n    };\n  }\n\n  var createOutputMethod = function (outputType, is224) {\n    return function (message) {\n      return new Sha256(is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createMethod = function (is224) {\n    var method = createOutputMethod('hex', is224);\n    if (NODE_JS) {\n      method = nodeWrap(method, is224);\n    }\n    method.create = function () {\n      return new Sha256(is224);\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  var nodeWrap = function (method, is224) {\n    var crypto = eval(\"require('crypto')\");\n    var Buffer = eval(\"require('buffer').Buffer\");\n    var algorithm = is224 ? 'sha224' : 'sha256';\n    var nodeMethod = function (message) {\n      if (typeof message === 'string') {\n        return crypto.createHash(algorithm).update(message, 'utf8').digest('hex');\n      } else {\n        if (message === null || message === undefined) {\n          throw new Error(ERROR);\n        } else if (message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        }\n      }\n      if (Array.isArray(message) || ArrayBuffer.isView(message) ||\n        message.constructor === Buffer) {\n        return crypto.createHash(algorithm).update(new Buffer(message)).digest('hex');\n      } else {\n        return method(message);\n      }\n    };\n    return nodeMethod;\n  };\n\n  var createHmacOutputMethod = function (outputType, is224) {\n    return function (key, message) {\n      return new HmacSha256(key, is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createHmacMethod = function (is224) {\n    var method = createHmacOutputMethod('hex', is224);\n    method.create = function (key) {\n      return new HmacSha256(key, is224);\n    };\n    method.update = function (key, message) {\n      return method.create(key).update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createHmacOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  function Sha256(is224, sharedMemory) {\n    if (sharedMemory) {\n      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      this.blocks = blocks;\n    } else {\n      this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    }\n\n    if (is224) {\n      this.h0 = 0xc1059ed8;\n      this.h1 = 0x367cd507;\n      this.h2 = 0x3070dd17;\n      this.h3 = 0xf70e5939;\n      this.h4 = 0xffc00b31;\n      this.h5 = 0x68581511;\n      this.h6 = 0x64f98fa7;\n      this.h7 = 0xbefa4fa4;\n    } else { // 256\n      this.h0 = 0x6a09e667;\n      this.h1 = 0xbb67ae85;\n      this.h2 = 0x3c6ef372;\n      this.h3 = 0xa54ff53a;\n      this.h4 = 0x510e527f;\n      this.h5 = 0x9b05688c;\n      this.h6 = 0x1f83d9ab;\n      this.h7 = 0x5be0cd19;\n    }\n\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n    this.is224 = is224;\n  }\n\n  Sha256.prototype.update = function (message) {\n    if (this.finalized) {\n      return;\n    }\n    var notString, type = typeof message;\n    if (type !== 'string') {\n      if (type === 'object') {\n        if (message === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        } else if (!Array.isArray(message)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n      notString = true;\n    }\n    var code, index = 0, i, length = message.length, blocks = this.blocks;\n\n    while (index < length) {\n      if (this.hashed) {\n        this.hashed = false;\n        blocks[0] = this.block;\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n          blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n          blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n          blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      }\n\n      if (notString) {\n        for (i = this.start; index < length && i < 64; ++index) {\n          blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n        }\n      } else {\n        for (i = this.start; index < length && i < 64; ++index) {\n          code = message.charCodeAt(index);\n          if (code < 0x80) {\n            blocks[i >> 2] |= code << SHIFT[i++ & 3];\n          } else if (code < 0x800) {\n            blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else if (code < 0xd800 || code >= 0xe000) {\n            blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else {\n            code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n            blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          }\n        }\n      }\n\n      this.lastByteIndex = i;\n      this.bytes += i - this.start;\n      if (i >= 64) {\n        this.block = blocks[16];\n        this.start = i - 64;\n        this.hash();\n        this.hashed = true;\n      } else {\n        this.start = i;\n      }\n    }\n    if (this.bytes > 4294967295) {\n      this.hBytes += this.bytes / 4294967296 << 0;\n      this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n  };\n\n  Sha256.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n      if (!this.hashed) {\n        this.hash();\n      }\n      blocks[0] = this.block;\n      blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n  };\n\n  Sha256.prototype.hash = function () {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4, f = this.h5, g = this.h6,\n      h = this.h7, blocks = this.blocks, j, s0, s1, maj, t1, t2, ch, ab, da, cd, bc;\n\n    for (j = 16; j < 64; ++j) {\n      // rightrotate\n      t1 = blocks[j - 15];\n      s0 = ((t1 >>> 7) | (t1 << 25)) ^ ((t1 >>> 18) | (t1 << 14)) ^ (t1 >>> 3);\n      t1 = blocks[j - 2];\n      s1 = ((t1 >>> 17) | (t1 << 15)) ^ ((t1 >>> 19) | (t1 << 13)) ^ (t1 >>> 10);\n      blocks[j] = blocks[j - 16] + s0 + blocks[j - 7] + s1 << 0;\n    }\n\n    bc = b & c;\n    for (j = 0; j < 64; j += 4) {\n      if (this.first) {\n        if (this.is224) {\n          ab = 300032;\n          t1 = blocks[0] - 1413257819;\n          h = t1 - 150054599 << 0;\n          d = t1 + 24177077 << 0;\n        } else {\n          ab = 704751109;\n          t1 = blocks[0] - 210244248;\n          h = t1 - 1521486534 << 0;\n          d = t1 + 143694565 << 0;\n        }\n        this.first = false;\n      } else {\n        s0 = ((a >>> 2) | (a << 30)) ^ ((a >>> 13) | (a << 19)) ^ ((a >>> 22) | (a << 10));\n        s1 = ((e >>> 6) | (e << 26)) ^ ((e >>> 11) | (e << 21)) ^ ((e >>> 25) | (e << 7));\n        ab = a & b;\n        maj = ab ^ (a & c) ^ bc;\n        ch = (e & f) ^ (~e & g);\n        t1 = h + s1 + ch + K[j] + blocks[j];\n        t2 = s0 + maj;\n        h = d + t1 << 0;\n        d = t1 + t2 << 0;\n      }\n      s0 = ((d >>> 2) | (d << 30)) ^ ((d >>> 13) | (d << 19)) ^ ((d >>> 22) | (d << 10));\n      s1 = ((h >>> 6) | (h << 26)) ^ ((h >>> 11) | (h << 21)) ^ ((h >>> 25) | (h << 7));\n      da = d & a;\n      maj = da ^ (d & b) ^ ab;\n      ch = (h & e) ^ (~h & f);\n      t1 = g + s1 + ch + K[j + 1] + blocks[j + 1];\n      t2 = s0 + maj;\n      g = c + t1 << 0;\n      c = t1 + t2 << 0;\n      s0 = ((c >>> 2) | (c << 30)) ^ ((c >>> 13) | (c << 19)) ^ ((c >>> 22) | (c << 10));\n      s1 = ((g >>> 6) | (g << 26)) ^ ((g >>> 11) | (g << 21)) ^ ((g >>> 25) | (g << 7));\n      cd = c & d;\n      maj = cd ^ (c & a) ^ da;\n      ch = (g & h) ^ (~g & e);\n      t1 = f + s1 + ch + K[j + 2] + blocks[j + 2];\n      t2 = s0 + maj;\n      f = b + t1 << 0;\n      b = t1 + t2 << 0;\n      s0 = ((b >>> 2) | (b << 30)) ^ ((b >>> 13) | (b << 19)) ^ ((b >>> 22) | (b << 10));\n      s1 = ((f >>> 6) | (f << 26)) ^ ((f >>> 11) | (f << 21)) ^ ((f >>> 25) | (f << 7));\n      bc = b & c;\n      maj = bc ^ (b & d) ^ cd;\n      ch = (f & g) ^ (~f & h);\n      t1 = e + s1 + ch + K[j + 3] + blocks[j + 3];\n      t2 = s0 + maj;\n      e = a + t1 << 0;\n      a = t1 + t2 << 0;\n    }\n\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n    this.h5 = this.h5 + f << 0;\n    this.h6 = this.h6 + g << 0;\n    this.h7 = this.h7 + h << 0;\n  };\n\n  Sha256.prototype.hex = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var hex = HEX_CHARS[(h0 >> 28) & 0x0F] + HEX_CHARS[(h0 >> 24) & 0x0F] +\n      HEX_CHARS[(h0 >> 20) & 0x0F] + HEX_CHARS[(h0 >> 16) & 0x0F] +\n      HEX_CHARS[(h0 >> 12) & 0x0F] + HEX_CHARS[(h0 >> 8) & 0x0F] +\n      HEX_CHARS[(h0 >> 4) & 0x0F] + HEX_CHARS[h0 & 0x0F] +\n      HEX_CHARS[(h1 >> 28) & 0x0F] + HEX_CHARS[(h1 >> 24) & 0x0F] +\n      HEX_CHARS[(h1 >> 20) & 0x0F] + HEX_CHARS[(h1 >> 16) & 0x0F] +\n      HEX_CHARS[(h1 >> 12) & 0x0F] + HEX_CHARS[(h1 >> 8) & 0x0F] +\n      HEX_CHARS[(h1 >> 4) & 0x0F] + HEX_CHARS[h1 & 0x0F] +\n      HEX_CHARS[(h2 >> 28) & 0x0F] + HEX_CHARS[(h2 >> 24) & 0x0F] +\n      HEX_CHARS[(h2 >> 20) & 0x0F] + HEX_CHARS[(h2 >> 16) & 0x0F] +\n      HEX_CHARS[(h2 >> 12) & 0x0F] + HEX_CHARS[(h2 >> 8) & 0x0F] +\n      HEX_CHARS[(h2 >> 4) & 0x0F] + HEX_CHARS[h2 & 0x0F] +\n      HEX_CHARS[(h3 >> 28) & 0x0F] + HEX_CHARS[(h3 >> 24) & 0x0F] +\n      HEX_CHARS[(h3 >> 20) & 0x0F] + HEX_CHARS[(h3 >> 16) & 0x0F] +\n      HEX_CHARS[(h3 >> 12) & 0x0F] + HEX_CHARS[(h3 >> 8) & 0x0F] +\n      HEX_CHARS[(h3 >> 4) & 0x0F] + HEX_CHARS[h3 & 0x0F] +\n      HEX_CHARS[(h4 >> 28) & 0x0F] + HEX_CHARS[(h4 >> 24) & 0x0F] +\n      HEX_CHARS[(h4 >> 20) & 0x0F] + HEX_CHARS[(h4 >> 16) & 0x0F] +\n      HEX_CHARS[(h4 >> 12) & 0x0F] + HEX_CHARS[(h4 >> 8) & 0x0F] +\n      HEX_CHARS[(h4 >> 4) & 0x0F] + HEX_CHARS[h4 & 0x0F] +\n      HEX_CHARS[(h5 >> 28) & 0x0F] + HEX_CHARS[(h5 >> 24) & 0x0F] +\n      HEX_CHARS[(h5 >> 20) & 0x0F] + HEX_CHARS[(h5 >> 16) & 0x0F] +\n      HEX_CHARS[(h5 >> 12) & 0x0F] + HEX_CHARS[(h5 >> 8) & 0x0F] +\n      HEX_CHARS[(h5 >> 4) & 0x0F] + HEX_CHARS[h5 & 0x0F] +\n      HEX_CHARS[(h6 >> 28) & 0x0F] + HEX_CHARS[(h6 >> 24) & 0x0F] +\n      HEX_CHARS[(h6 >> 20) & 0x0F] + HEX_CHARS[(h6 >> 16) & 0x0F] +\n      HEX_CHARS[(h6 >> 12) & 0x0F] + HEX_CHARS[(h6 >> 8) & 0x0F] +\n      HEX_CHARS[(h6 >> 4) & 0x0F] + HEX_CHARS[h6 & 0x0F];\n    if (!this.is224) {\n      hex += HEX_CHARS[(h7 >> 28) & 0x0F] + HEX_CHARS[(h7 >> 24) & 0x0F] +\n        HEX_CHARS[(h7 >> 20) & 0x0F] + HEX_CHARS[(h7 >> 16) & 0x0F] +\n        HEX_CHARS[(h7 >> 12) & 0x0F] + HEX_CHARS[(h7 >> 8) & 0x0F] +\n        HEX_CHARS[(h7 >> 4) & 0x0F] + HEX_CHARS[h7 & 0x0F];\n    }\n    return hex;\n  };\n\n  Sha256.prototype.toString = Sha256.prototype.hex;\n\n  Sha256.prototype.digest = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var arr = [\n      (h0 >> 24) & 0xFF, (h0 >> 16) & 0xFF, (h0 >> 8) & 0xFF, h0 & 0xFF,\n      (h1 >> 24) & 0xFF, (h1 >> 16) & 0xFF, (h1 >> 8) & 0xFF, h1 & 0xFF,\n      (h2 >> 24) & 0xFF, (h2 >> 16) & 0xFF, (h2 >> 8) & 0xFF, h2 & 0xFF,\n      (h3 >> 24) & 0xFF, (h3 >> 16) & 0xFF, (h3 >> 8) & 0xFF, h3 & 0xFF,\n      (h4 >> 24) & 0xFF, (h4 >> 16) & 0xFF, (h4 >> 8) & 0xFF, h4 & 0xFF,\n      (h5 >> 24) & 0xFF, (h5 >> 16) & 0xFF, (h5 >> 8) & 0xFF, h5 & 0xFF,\n      (h6 >> 24) & 0xFF, (h6 >> 16) & 0xFF, (h6 >> 8) & 0xFF, h6 & 0xFF\n    ];\n    if (!this.is224) {\n      arr.push((h7 >> 24) & 0xFF, (h7 >> 16) & 0xFF, (h7 >> 8) & 0xFF, h7 & 0xFF);\n    }\n    return arr;\n  };\n\n  Sha256.prototype.array = Sha256.prototype.digest;\n\n  Sha256.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var buffer = new ArrayBuffer(this.is224 ? 28 : 32);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    dataView.setUint32(20, this.h5);\n    dataView.setUint32(24, this.h6);\n    if (!this.is224) {\n      dataView.setUint32(28, this.h7);\n    }\n    return buffer;\n  };\n\n  function HmacSha256(key, is224, sharedMemory) {\n    var i, type = typeof key;\n    if (type === 'string') {\n      var bytes = [], length = key.length, index = 0, code;\n      for (i = 0; i < length; ++i) {\n        code = key.charCodeAt(i);\n        if (code < 0x80) {\n          bytes[index++] = code;\n        } else if (code < 0x800) {\n          bytes[index++] = (0xc0 | (code >> 6));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else if (code < 0xd800 || code >= 0xe000) {\n          bytes[index++] = (0xe0 | (code >> 12));\n          bytes[index++] = (0x80 | ((code >> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else {\n          code = 0x10000 + (((code & 0x3ff) << 10) | (key.charCodeAt(++i) & 0x3ff));\n          bytes[index++] = (0xf0 | (code >> 18));\n          bytes[index++] = (0x80 | ((code >> 12) & 0x3f));\n          bytes[index++] = (0x80 | ((code >> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        }\n      }\n      key = bytes;\n    } else {\n      if (type === 'object') {\n        if (key === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && key.constructor === ArrayBuffer) {\n          key = new Uint8Array(key);\n        } else if (!Array.isArray(key)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(key)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n    }\n\n    if (key.length > 64) {\n      key = (new Sha256(is224, true)).update(key).array();\n    }\n\n    var oKeyPad = [], iKeyPad = [];\n    for (i = 0; i < 64; ++i) {\n      var b = key[i] || 0;\n      oKeyPad[i] = 0x5c ^ b;\n      iKeyPad[i] = 0x36 ^ b;\n    }\n\n    Sha256.call(this, is224, sharedMemory);\n\n    this.update(iKeyPad);\n    this.oKeyPad = oKeyPad;\n    this.inner = true;\n    this.sharedMemory = sharedMemory;\n  }\n  HmacSha256.prototype = new Sha256();\n\n  HmacSha256.prototype.finalize = function () {\n    Sha256.prototype.finalize.call(this);\n    if (this.inner) {\n      this.inner = false;\n      var innerHash = this.array();\n      Sha256.call(this, this.is224, this.sharedMemory);\n      this.update(this.oKeyPad);\n      this.update(innerHash);\n      Sha256.prototype.finalize.call(this);\n    }\n  };\n\n  var exports = createMethod();\n  exports.sha256 = exports;\n  exports.sha224 = createMethod(true);\n  exports.sha256.hmac = createHmacMethod();\n  exports.sha224.hmac = createHmacMethod(true);\n\n  if (COMMON_JS) {\n    module.exports = exports;\n  } else {\n    root.sha256 = exports.sha256;\n    root.sha224 = exports.sha224;\n    if (AMD) {\n      define(function () {\n        return exports;\n      });\n    }\n  }\n})();\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import {FetishImage} from \"FetishImage\";\r\nimport {ImageContainerTyping} from \"Typings\";\r\nimport {IFetishDocumentParser} from \"./IFetishDocumentParser\";\r\n\r\nexport class KonachanParser implements IFetishDocumentParser {\r\n    public parse(doc: HTMLDocument): FetishImage[] {\r\n        let list = doc.getElementById(\"post-list-posts\");\r\n        let childrenLi: NodeListOf<HTMLLIElement> = list.childNodes as NodeListOf<HTMLLIElement>;\r\n        let retArr: FetishImage[] = [];\r\n        for (let i: number = 0; i < childrenLi.length; i++) {\r\n            let e: HTMLLIElement = childrenLi[i];\r\n            if (e.nodeType == Node.ELEMENT_NODE) {\r\n                let containerInfo: ImageContainerTyping = this._parseContainer(e);\r\n                retArr.push(new FetishImage(containerInfo));\r\n            }\r\n        }\r\n        return retArr;\r\n    }\r\n\r\n    private _parseContainer(el: HTMLLIElement): ImageContainerTyping {\r\n        let url: string;\r\n        let res: string;\r\n        let title: string;\r\n        let tags: string[];\r\n\r\n        let tagForTitle: HTMLDivElement = el.getElementsByClassName(\"inner\")[0] as HTMLDivElement;\r\n        let aNameTag: HTMLAnchorElement = tagForTitle.firstChild as HTMLAnchorElement;\r\n        let infoTag: HTMLAnchorElement = el.getElementsByClassName(\"directlink\")[0] as HTMLAnchorElement;\r\n        let tagInfo = aNameTag.firstChild as HTMLImageElement;\r\n        url = infoTag.href;\r\n        res = infoTag.getElementsByClassName(\"directlink-res\")[0].innerHTML;\r\n        title = `${aNameTag.href.substr(aNameTag.href.lastIndexOf('/') + 1)}.${url.split(\".\").pop()}`;\r\n\r\n        let tagInfoString = tagInfo.title;\r\n        let strSplit = tagInfoString.split(\" \");\r\n        let slice = strSplit.slice(strSplit.indexOf(\"Tags:\") + 1);\r\n        if (slice.length === 0) {\r\n            tags = [];\r\n        } else {\r\n            slice.splice(slice.indexOf(\":\") - 1);\r\n            tags = slice;\r\n        }\r\n        return {\r\n            url: url,\r\n            res: res,\r\n            title: title,\r\n            tags: tags\r\n        };\r\n    }\r\n}\r\n","import {ImageContainerTyping} from \"Typings\";\r\nimport {AjaxUtils} from \"Utils\";\r\nimport {sha256} from 'js-sha256';\r\n\r\nexport class FetishImage {\r\n    private readonly _res: string;\r\n    private readonly _url: string;\r\n    private _title: string;\r\n    private _isInit: boolean;\r\n    private _actualImage: Blob;\r\n    private _tags:string[];\r\n\r\n    constructor(container: ImageContainerTyping) {\r\n        this._res = container.res;\r\n        this._title = container.title;\r\n        this._url = container.url;\r\n        this._isInit = false;\r\n        this._tags = container.tags;\r\n    }\r\n\r\n    public get res(): string {\r\n        return this._res;\r\n    }\r\n\r\n    public get url(): string {\r\n        return this._url;\r\n    }\r\n\r\n\r\n    public get title(): string {\r\n        return this._title;\r\n    }\r\n\r\n    public get isInit(): boolean {\r\n        return this._isInit;\r\n    }\r\n\r\n    public get image(): Blob {\r\n        if (!this._isInit) {\r\n            throw new Error(\"Image has not been loaded yet\");\r\n        }\r\n        return this._actualImage;\r\n    }\r\n\r\n    public get tags():string[]{\r\n        return this._tags;\r\n    }\r\n\r\n    public unloadImage(): void {\r\n        this._isInit = false;\r\n        this._actualImage = null;\r\n    }\r\n\r\n    public loadImage(): Promise<void> {\r\n        function getResult(reader:FileReader):Promise<string|ArrayBuffer> {\r\n            return new Promise((resolve, reject) => {\r\n                reader.onload = function():void {\r\n                    resolve(this.result);\r\n                };\r\n                reader.onerror = reader.onabort = reject;\r\n            });\r\n        }\r\n        if (this._isInit) {\r\n            return Promise.resolve();\r\n        }\r\n        return AjaxUtils.loadXHR(this.url).then(image => {\r\n            this._actualImage = image;\r\n            // Konachan has a thing about setting files with the same name, but not the same actual image, this will append a hash of the image as the file name, thus, removing duplicated files, and if there is a file with the same name that is really a dupe, then when you extract it, it will have the same hash\r\n            let reader = new FileReader();\r\n            reader.readAsBinaryString(image);\r\n            return getResult(reader);\r\n        }).then(value => {\r\n            let hashofImage = sha256(value);\r\n            if(!this.title.includes(`_${hashofImage}`)){\r\n                let titleSplit = this.title.split(\".\");\r\n                let extension = titleSplit.pop();\r\n                this._title = `${titleSplit.join(\"\")}_${hashofImage}.${extension}`;\r\n            }\r\n            this._isInit = true;\r\n        });\r\n    }\r\n}","import {IFetishPage, IFetishSite, SITES} from \"./IFetishSite\";\r\nimport {FetishImage} from \"./FetishImage\";\r\nimport {IFetishDocumentParser} from \"./IFetishDocumentParser\";\r\nimport {AjaxUtils, MathUtil, QueryString, SiteUtils} from \"./Utils\";\r\nimport {Main} from \"./Main\";\r\nimport {KonachanParser} from \"./FetishDocumentParser\";\r\n\r\nabstract class FetishSite implements IFetishSite {\r\n\r\n    public constructor(protected doc: Document) {\r\n    }\r\n\r\n    public abstract get pages(): Promise<IFetishPage[]>;\r\n\r\n    public abstract get site(): SITES;\r\n}\r\n\r\nclass KonaChan extends FetishSite {\r\n\r\n    public get pages(): Promise<IFetishPage[]> {\r\n        async function load(this: KonaChan, urls: string[]): Promise<IFetishPage[]> {\r\n            let count: number = 0;\r\n            let arr: IFetishPage[] = [];\r\n            for (let url of urls) {\r\n                let response = await fetch(url);\r\n                let html = await response.text();\r\n                count++;\r\n                let domParser: DOMParser = new DOMParser();\r\n                let doc: Document = domParser.parseFromString(html, \"text/html\");\r\n                let fe = new FetishPage(doc, this.site);\r\n                let percent: number = Math.floor(100 * count / urls.length);\r\n                Main.setLabel(`Parsing pages ${percent.toString()}% done`);\r\n                arr.push(fe);\r\n            }\r\n            arr.push(new FetishPage(this.doc, this.site));\r\n            return arr;\r\n        }\r\n\r\n        let allPages: NodeListOf<HTMLAnchorElement> = this.doc.querySelectorAll(\"#paginator a:not(.next_page):not(.previous_page)\");\r\n        let urls: Array<string> = [];\r\n        if (allPages.length > 0) {\r\n            let arrOfPageA: HTMLAnchorElement[] = Array.from(allPages);\r\n            let firstPage: HTMLAnchorElement = arrOfPageA[0];\r\n            let lastPage: HTMLAnchorElement = arrOfPageA[arrOfPageA.length - 1];\r\n            let firstPageNumber: number = Number.parseInt(firstPage.text);\r\n            let lastPageNumber: number = Number.parseInt(lastPage.text);\r\n            let rangeBetween: Array<number> = MathUtil.range(firstPageNumber, lastPageNumber);\r\n            let baseUrl: string = window.location.href;\r\n\r\n            let currentPage: string = QueryString.page === undefined ? 1 : QueryString.page;\r\n            for (let i: number = 0; i < rangeBetween.length; i++) {\r\n                let num: string = String(rangeBetween[i]);\r\n                if (num == currentPage) {\r\n                    continue;\r\n                }\r\n                let newUrl: string = AjaxUtils.addParameter(baseUrl, \"page\", num.toString(), true);\r\n                urls.push(newUrl);\r\n            }\r\n        }\r\n        return load.call(this, urls);\r\n    }\r\n\r\n    public get site(): SITES {\r\n        return SITES.KONACHAN;\r\n    }\r\n}\r\n\r\n\r\nclass FetishPage implements IFetishPage {\r\n    protected fetishDocumentParser: IFetishDocumentParser;\r\n    private readonly doc: Document;\r\n    private _imageCahce: FetishImage[] = [];\r\n\r\n    public constructor(doc: Document, site: SITES) {\r\n        switch (site) {\r\n            case SITES.KONACHAN:\r\n                this.fetishDocumentParser = new KonachanParser();\r\n                break;\r\n        }\r\n        this.doc = doc;\r\n    }\r\n\r\n    public get images(): FetishImage[] {\r\n        if (this._imageCahce.length === 0) {\r\n            this._imageCahce = this.fetishDocumentParser.parse(this.doc);\r\n            return this._imageCahce;\r\n        }\r\n        return this._imageCahce;\r\n    }\r\n}\r\n\r\nexport module FetishSiteFactory {\r\n    export function getSite(doc: Document): IFetishSite {\r\n        switch (SiteUtils.getSite(doc)) {\r\n            case SITES.KONACHAN:\r\n                return new KonaChan(doc);\r\n        }\r\n    }\r\n}","import {FetishImage} from \"./FetishImage\";\r\n\r\nexport interface IFetishSite {\r\n    readonly pages: Promise<IFetishPage[]>;\r\n    readonly site:SITES;\r\n}\r\nexport enum SITES{\r\n    KONACHAN= \"konachan\",\r\n}\r\n\r\nexport interface IFetishPage {\r\n    readonly images: FetishImage[];\r\n}","import {FetishImage} from \"FetishImage\";\r\nimport {QueryString} from \"Utils\";\r\nimport * as JSZip from \"JSZip\";\r\nimport {FetishSiteFactory} from \"./FetishSite\";\r\nimport {UIFactory} from \"./UI\";\r\n\r\nexport module Main {\r\n    let _isInit: boolean = false;\r\n    let _images: FetishImage[] = [];\r\n\r\n    function doDownloadZip(files: FetishImage[], title?: string): Promise<void> {\r\n        setLabel(\"compressing\");\r\n        let zip: JSZip = new JSZip();\r\n        for (let img of files) {\r\n            console.log(`${img.title} has tags: ${img.tags}`);\r\n            zip.file(img.title, img.image);\r\n        }\r\n        return zip.generateAsync({type: \"blob\"}).then(function (blob: Blob): void {\r\n            if (!title) {\r\n                title = QueryString.tags;\r\n            } else {\r\n                title = `${QueryString.tags} (${title})`;\r\n            }\r\n            saveAs(blob, title + \".zip\");\r\n            setLabel();\r\n        });\r\n    }\r\n\r\n    export function setLabel(str: string = \"Download all your fetishes\"): void {\r\n        document.getElementById(\"fetishAnchor\").innerText = str;\r\n    }\r\n\r\n    export function init(): void {\r\n        if (_isInit) {\r\n            return;\r\n        }\r\n        buildUI();\r\n\r\n        function buildUI(): void {\r\n            function displayOptions(bool:boolean):void{\r\n                let opParent = document.getElementById(\"fetishDownloadOptions\").parentElement;\r\n                opParent.style.display = bool ? \"inline\" : \"none\";\r\n            }\r\n            let uiMaker = UIFactory.getUI(document);\r\n            uiMaker.createUI();\r\n            setLabel();\r\n            let idDownloading: boolean = false;\r\n            let anchor = document.getElementById(\"fetishAnchor\");\r\n            anchor.addEventListener(\"click\", async e => {\r\n                if (idDownloading) {\r\n                    return;\r\n                }\r\n                if (_isInit) {\r\n                    doDownloadZip(_images);\r\n                    return;\r\n                }\r\n                let options = document.getElementById(\"fetishDownloadOptions\");\r\n                displayOptions(false);\r\n                idDownloading = true;\r\n                setLabel(\"Parsing pages... Please wait\");\r\n                let site = FetishSiteFactory.getSite(window.document);\r\n                let pages = await site.pages;\r\n                for (let page of pages) {\r\n                    _images = _images.concat(page.images);\r\n                }\r\n\r\n                async function delay(ms: number): Promise<void> {\r\n                    return new Promise((resolve) => {\r\n                        setTimeout(resolve, ms);\r\n                    });\r\n                }\r\n\r\n                let batchLimit: number = 250;\r\n                let count = 0;\r\n                let isBatch: boolean = _images.length > batchLimit;\r\n                let batch: FetishImage[] = [];\r\n\r\n                async function doDownload(images: FetishImage[]): Promise<void> {\r\n                    let failedImages: FetishImage[] = [];\r\n                    for (let im of images) {\r\n                        if (!im.isInit) {\r\n                            try {\r\n                                count++;\r\n                                await delay(50);\r\n                                await im.loadImage();\r\n                                setLabel(`${count} out of ${images.length} done`);\r\n                                if (isBatch) {\r\n                                    batch.push(im);\r\n                                    if (count % batchLimit === 0) {\r\n                                        let rounded: number = Math.round(count / batchLimit) * batchLimit;\r\n                                        let batchNum: string = rounded.toString()[0];\r\n                                        let of: number = Math.floor(Math.round(images.length / batchLimit) * batchLimit);\r\n                                        let ofStr: string = of.toString()[0];\r\n                                        if (images.length % batchLimit !== 0 && images.length % batchLimit > batchLimit) {\r\n                                            ofStr = String(parseInt(ofStr) + 1);\r\n                                        }\r\n                                        await doDownloadZip(batch, `${batchNum} of ${ofStr}`);\r\n                                        for (let i: number = 0; i < batch.length; i++) {\r\n                                            batch[i].unloadImage();\r\n                                        }\r\n                                        batch = [];\r\n                                    }\r\n                                }\r\n                            } catch (e) {\r\n                                failedImages.push(im);\r\n                                await delay(4000);\r\n                            }\r\n                        }\r\n                    }\r\n                    if (failedImages.length > 0) {\r\n                        count = 0;\r\n                        setLabel(\"Re-retrying failed images...\");\r\n                        await doDownload(failedImages);\r\n                        failedImages = [];\r\n                    }\r\n                }\r\n\r\n                setLabel(`Click to download ${_images.length} images`);\r\n                let inEvent = false;\r\n                let downloadOptionsCallBack = () => {\r\n                    alert(\"download options\");\r\n                };\r\n                options.addEventListener(\"click\", downloadOptionsCallBack);\r\n                displayOptions(true);\r\n                let clickDownloadCallBack = async () => {\r\n                    displayOptions(false);\r\n                    if(inEvent){\r\n                        return;\r\n                    }\r\n                    try {\r\n                        inEvent = true;\r\n                        await doDownload(_images);\r\n                        if (isBatch && batch.length > 0) {\r\n                            // download the rest of the batch\r\n                            await doDownloadZip(batch, \"final\");\r\n                            // inti is not true, as batches remove images as they are downloaded\r\n                        } else {\r\n                            await doDownloadZip(_images);\r\n                            _isInit = true;\r\n                        }\r\n                    } finally {\r\n                        anchor.removeEventListener(\"click\", clickDownloadCallBack);\r\n                        options.removeEventListener(\"click\", downloadOptionsCallBack);\r\n                        inEvent = false;\r\n                        idDownloading = false;\r\n                    }\r\n                };\r\n                anchor.addEventListener(\"click\", clickDownloadCallBack);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nMain.init();","import {SiteUtils} from \"./Utils\";\r\nimport {SITES} from \"./IFetishSite\";\r\n\r\nexport interface UI {\r\n\r\n    /**\r\n     * Should create 2 elements with the id of:\r\n     * fetishAnchor - this will be the thing clicked to kick off the download\r\n     * fetishDownloadOptions - This will be used to call the Options for said download\r\n     */\r\n    createUI(): void;\r\n}\r\n\r\nexport module UIFactory {\r\n    export function getUI(doc: Document): UI {\r\n        switch (SiteUtils.getSite(doc)) {\r\n            case SITES.KONACHAN:\r\n                return new KonaChanUi(doc);\r\n        }\r\n    }\r\n}\r\n\r\nabstract class AbstractUI implements UI {\r\n    public constructor(protected readonly doc: Document) {\r\n    }\r\n\r\n    public abstract createUI(): void;\r\n}\r\n\r\nexport class KonaChanUi extends AbstractUI {\r\n    private ulSideBar: HTMLUListElement = this.doc.getElementById(\"subnavbar\") as HTMLUListElement;\r\n\r\n    private createLi(): HTMLLIElement {\r\n        let node: HTMLLIElement = this.doc.createElement(\"LI\") as HTMLLIElement;\r\n        this.ulSideBar.appendChild(node);\r\n        return node;\r\n    }\r\n\r\n    public createUI(): void {\r\n\r\n        function makeDoDownload(this: KonaChanUi): void {\r\n            let node: HTMLLIElement = this.createLi();\r\n            let textnode: Text = this.doc.createTextNode(\"\");\r\n            let aTag: HTMLAnchorElement = this.doc.createElement(\"a\");\r\n            aTag.id = \"fetishAnchor\";\r\n            aTag.appendChild(textnode);\r\n            aTag.href = \"#\";\r\n            node.appendChild(aTag);\r\n        }\r\n\r\n        function makeDownloadOptionsTag(this: KonaChanUi): void {\r\n            let node: HTMLLIElement = this.createLi();\r\n            node.style.display = \"none\";\r\n            let textnode: Text = this.doc.createTextNode(\"Download Options\");\r\n            let aTag: HTMLAnchorElement = this.doc.createElement(\"a\");\r\n            aTag.id = \"fetishDownloadOptions\";\r\n            aTag.appendChild(textnode);\r\n            aTag.href = \"#\";\r\n            aTag.innerText = \"Download Options\";\r\n            node.appendChild(aTag);\r\n        }\r\n\r\n        makeDoDownload.call(this);\r\n        makeDownloadOptionsTag.call(this);\r\n    }\r\n\r\n}","import * as FileSaver from \"file-saver\";\r\nimport {SITES} from \"./IFetishSite\";\r\n\r\nexport enum HTTP_METHOD {\r\n    GET = \"GET\",\r\n    POST = \"POST\",\r\n    OPTIONS = \"OPTIONS\"\r\n}\r\n\r\nexport let QueryString: { [key: string]: any } = (() => {\r\n    if (typeof window == \"undefined\") {\r\n        return {};\r\n    }\r\n    let query_string: { [key: string]: any } = {};\r\n    let query: string = window.location.search.substring(1);\r\n    let vars: Array<string> = query.split(\"&\");\r\n    for (let i: number = 0; i < vars.length; i++) {\r\n        let pair: Array<string> = vars[i].split(\"=\");\r\n        if (typeof query_string[pair[0]] === \"undefined\") {\r\n            query_string[pair[0]] = pair[1];\r\n        } else if (typeof query_string[pair[0]] === \"string\") {\r\n            query_string[pair[0]] = [query_string[pair[0]], pair[1]];\r\n        } else {\r\n            query_string[pair[0]].push(pair[1]);\r\n        }\r\n    }\r\n    return query_string;\r\n})();\r\n\r\nexport class AjaxUtils {\r\n\r\n    public static addParameter(url: string, parameterName: string, parameterValue: string, atStart: boolean = false): string {\r\n        let replaceDuplicates: boolean = true;\r\n        let urlhash: string;\r\n        let cl: number;\r\n        if (url.indexOf('#') > 0) {\r\n            cl = url.indexOf('#');\r\n            urlhash = url.substring(url.indexOf('#'), url.length);\r\n        } else {\r\n            urlhash = '';\r\n            cl = url.length;\r\n        }\r\n        let sourceUrl: string = url.substring(0, cl);\r\n        let urlParts: string[] = sourceUrl.split(\"?\");\r\n        let newQueryString: string = \"\";\r\n        if (urlParts.length > 1) {\r\n            let parameters: string[] = urlParts[1].split(\"&\");\r\n            for (let i: number = 0; (i < parameters.length); i++) {\r\n                let parameterParts: string[] = parameters[i].split(\"=\");\r\n                if (!(replaceDuplicates && parameterParts[0] == parameterName)) {\r\n                    if (newQueryString == \"\") {\r\n                        newQueryString = \"?\";\r\n                    } else {\r\n                        newQueryString += \"&\";\r\n                    }\r\n                    newQueryString += parameterParts[0] + \"=\" + (parameterParts[1] ? parameterParts[1] : '');\r\n                }\r\n            }\r\n        }\r\n        if (newQueryString == \"\") {\r\n            newQueryString = \"?\";\r\n        }\r\n        if (atStart) {\r\n            newQueryString = '?' + parameterName + \"=\" + parameterValue + (newQueryString.length > 1 ? '&' + newQueryString.substring(1) : '');\r\n        } else {\r\n            if (newQueryString !== \"\" && newQueryString != '?')\r\n                newQueryString += \"&\";\r\n            newQueryString += parameterName + \"=\" + (parameterValue ? parameterValue : '');\r\n        }\r\n        return urlParts[0] + newQueryString + urlhash;\r\n    }\r\n\r\n    public static loadXHR(url: string): Promise<Blob> {\r\n        return new Promise((resolve, reject) => {\r\n            try {\r\n                let xhr: XMLHttpRequest = new XMLHttpRequest();\r\n                xhr.open(\"GET\", url);\r\n                xhr.responseType = \"blob\";\r\n                xhr.timeout = 20000;\r\n                xhr.onerror = () => {\r\n                    reject(\"Network error.\");\r\n                };\r\n                xhr.onload = () => {\r\n                    if (xhr.status === 200) {\r\n                        resolve(xhr.response);\r\n                    } else {\r\n                        reject(\"Loading error:\" + xhr.statusText);\r\n                    }\r\n                };\r\n                xhr.ontimeout = () => {\r\n                    reject(\"Network error.\");\r\n                };\r\n                xhr.send();\r\n            } catch (err) {\r\n                reject(err.message);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nclass EnumEx {\r\n    public static getNamesAndValues<T extends number>(e: any): Array<object> {\r\n        return EnumEx.getNames(e).map(n => ({name: n, value: e[n] as T}));\r\n    }\r\n    /**\r\n     * get the numValue associated with it's own key. if you want to get a TypeScript Enum based on an index you can use this\r\n     * @param e\r\n     * @param aName\r\n     * @returns {string|null}\r\n     */\r\n    public static loopBack<T>(e: any, aName: any): T {\r\n        let keyValuePair: Array<{ name: T, value: any }> = EnumEx.getNamesAndValues(e) as Array<{ name: T, value: any }>;\r\n        for (let i: number = 0; i < keyValuePair.length; i++) {\r\n            let obj: { name: T, value: any } = keyValuePair[i];\r\n            if (obj.name === aName) {\r\n                return obj.name;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public static getNames(e: any): Array<string> {\r\n        return EnumEx.getObjValues(e).filter(v => typeof v === \"string\") as string[];\r\n    }\r\n\r\n    private static getObjValues(e: any): Array<number | string> {\r\n        return Object.keys(e).map(k => e[k]);\r\n    }\r\n}\r\n\r\nexport class MathUtil {\r\n    public static range(start: number, end: number): Array<number> {\r\n        // @ts-ignore\r\n        return Array(end - start + 1).fill().map((_, idx) => start + idx);\r\n    }\r\n}\r\n\r\nexport module SiteUtils{\r\n    export function getSite(doc: Document):SITES{\r\n        let url = doc.location.hostname.split(\".\").shift();\r\n        return EnumEx.loopBack(SITES, url);\r\n    }\r\n}","module.exports = __WEBPACK_EXTERNAL_MODULE_JSZip__;"],"sourceRoot":""}